<div class="card bg-light">
  <div class="card-body py-1 px-1">
    <div class="card-title text-center">
      <span class="badge-pill badge-warning counter mr-2"
        ><b>{{ unpublishedChanges.length }}</b></span
      >
      Unpublished Changes
      <lib-fontawsome-toggle-button
        class="float-right mr-2"
        titleOff="Show Changelog"
        titleOn="Hide Changelog"
        symbolOn="fa-ellipsis-h"
        symbolOff="fa-list-ol"
        style="font-size: x-large"
        [(status)]="changelogVisible"
      ></lib-fontawsome-toggle-button>
    </div>
    <div class="container container-fluid">
      <div class="row">
        <div class="col p-1">
          <button
            class="btn btn-sm btn-block btn-primary"
            (click)="undoLastChange()"
          >
            Undo last change
            <i
              class="fa fa-undo ml-2"
              aria-hidden="true"
              style="font-size: large"
            ></i>
          </button>
        </div>
        <div class="col p-1">
          <button class="btn btn-sm btn-block btn-primary" (click)="publish()">
            Publish changes
            <i
              class="fa fa-upload ml-2"
              aria-hidden="true"
              style="font-size: large"
            ></i>
          </button>
        </div>
      </div>
    </div>
    <div *ngIf="changelogVisible">
      <ul class="list-group">
        <li *ngFor="let change of unpublishedChanges" class="list-group-item">
          <div>
            <b>{{ change.message.split("\n")[0] }}</b> [{{
              change.id.substring(0, 7)
            }}]
          </div>
          <div>
            {{ change.date * 1000 | date: "medium":null:"de" }},
            {{ change.author }}
          </div>
        </li>
      </ul>
    </div>
  </div>
</div>
